import{s as ue,M as D,i as A,n as J,h as p,G as pe,e as _,b as v,o as E,f as k,C as _e,d as H,A as ve,t as I,m as w,q as L,p as T,r as n,w as F,J as q,y as me}from"../chunks/scheduler.OWaxIzIJ.js";import{e as G,u as ge,d as ke}from"../chunks/each.smOdYV4G.js";import{S as ye,i as be}from"../chunks/index.3LzlWLC8.js";import{g as ae}from"../chunks/entry.Gzexlnjv.js";import{f as ie}from"../chunks/dateFormatter.JrucCzqQ.js";import{g as Ee}from"../chunks/stores.9wue5dSA.js";import{g as Re}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.Ov6B9o8A.js";function Ce(o){return{rid:o.rid,title:o.title,time_modified:o.time_modified,instructions:o.instructions,ingredients:o.ingredients}}function oe(o,e,a){const t=o.slice();return t[12]=e[a],t}function re(o,e,a){const t=o.slice();return t[15]=e[a],t[17]=a,t}function we(o){let e,a=G(o[0]),t=[];for(let l=0;l<a.length;l+=1)t[l]=ce(oe(o,a,l));return{c(){e=_("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var i=E(e);for(let s=0;s<t.length;s+=1)t[s].l(i);i.forEach(p),this.h()},h(){k(e,"class","flex flex-wrap gap-8")},m(l,i){A(l,e,i);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,i){if(i&29){a=G(l[0]);let s;for(s=0;s<a.length;s+=1){const r=oe(l,a,s);t[s]?t[s].p(r,i):(t[s]=ce(r),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=a.length}},d(l){l&&p(e),_e(t,l)}}}function Te(o){let e,a='<div class="placeholder"></div> <div class="grid grid-cols-4 gap-4"><div class="placeholder"></div> <div class="placeholder"></div> <div class="placeholder"></div> <div class="placeholder"></div></div> <div class="placeholder"></div> <div class="grid grid-cols-4 gap-4"><div class="placeholder"></div> <div class="placeholder"></div> <div class="placeholder"></div> <div class="placeholder"></div></div> <div class="placeholder"></div>';return{c(){e=_("div"),e.innerHTML=a,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-jg8j3s"&&(e.innerHTML=a),this.h()},h(){k(e,"class","p-4 space-y-4"),ve(e,"animate-pulse",!0)},m(t,l){A(t,e,l)},p:J,d(t){t&&p(e)}}}function Ne(o){let e,a,t=o[17]+1+"",l,i,s,r,d="...",b;return{c(){e=_("li"),a=_("span"),l=I(t),i=I("."),s=w(),r=_("span"),r.textContent=d,b=w(),this.h()},l(m){e=v(m,"LI",{});var c=E(e);a=v(c,"SPAN",{});var h=E(a);l=L(h,t),i=L(h,"."),h.forEach(p),s=T(c),r=v(c,"SPAN",{class:!0,"data-svelte-h":!0}),H(r)!=="svelte-lvh5zq"&&(r.textContent=d),b=T(c),c.forEach(p),this.h()},h(){k(r,"class","flex-auto")},m(m,c){A(m,e,c),n(e,a),n(a,l),n(a,i),n(e,s),n(e,r),n(e,b)},p(m,c){c&1&&t!==(t=m[17]+1+"")&&q(l,t)},d(m){m&&p(e)}}}function Se(o){let e,a,t=o[17]+1+"",l,i,s,r,d=o[15]+"",b,m;return{c(){e=_("li"),a=_("span"),l=I(t),i=I("."),s=w(),r=_("span"),b=I(d),m=w(),this.h()},l(c){e=v(c,"LI",{});var h=E(e);a=v(h,"SPAN",{});var y=E(a);l=L(y,t),i=L(y,"."),y.forEach(p),s=T(h),r=v(h,"SPAN",{class:!0});var P=E(r);b=L(P,d),P.forEach(p),m=T(h),h.forEach(p),this.h()},h(){k(r,"class","flex-auto")},m(c,h){A(c,e,h),n(e,a),n(a,l),n(a,i),n(e,s),n(e,r),n(r,b),n(e,m)},p(c,h){h&1&&t!==(t=c[17]+1+"")&&q(l,t),h&1&&d!==(d=c[15]+"")&&q(b,d)},d(c){c&&p(e)}}}function ne(o,e){let a,t;function l(r,d){return r[17]<4?Se:Ne}let i=l(e),s=i(e);return{key:o,first:null,c(){a=D(),s.c(),t=D(),this.h()},l(r){a=D(),s.l(r),t=D(),this.h()},h(){this.first=a},m(r,d){A(r,a,d),s.m(r,d),A(r,t,d)},p(r,d){e=r,i===(i=l(e))&&s?s.p(e,d):(s.d(1),s=i(e),s&&(s.c(),s.m(t.parentNode,t)))},d(r){r&&(p(a),p(t)),s.d(r)}}}function ce(o){let e,a,t,l=o[12].title+"",i,s,r,d=ie(new Date(o[12].time_modified))+"",b,m,c,h,y=[],P=new Map,u,R,M,N,S,K="Delete Recipe",U,x,Q="Update Recipe",V,O,X="View Recipe",$,z,Y,B=G(o[12].ingredients.slice(0,5));const Z=g=>g[15];for(let g=0;g<B.length;g+=1){let f=re(o,B,g),C=Z(f);P.set(C,y[g]=ne(C,f))}function de(){return o[5](o[12])}function he(){return o[6](o[12])}function fe(){return o[7](o[12])}return{c(){e=_("section"),a=_("header"),t=_("h3"),i=I(l),s=w(),r=_("span"),b=I(d),m=w(),c=_("article"),h=_("ol");for(let g=0;g<y.length;g+=1)y[g].c();u=w(),R=_("hr"),M=w(),N=_("footer"),S=_("button"),S.textContent=K,U=w(),x=_("button"),x.textContent=Q,V=w(),O=_("button"),O.textContent=X,$=w(),this.h()},l(g){e=v(g,"SECTION",{class:!0});var f=E(e);a=v(f,"HEADER",{class:!0});var C=E(a);t=v(C,"H3",{class:!0});var ee=E(t);i=L(ee,l),ee.forEach(p),s=T(C),r=v(C,"SPAN",{class:!0});var te=E(r);b=L(te,d),te.forEach(p),C.forEach(p),m=T(f),c=v(f,"ARTICLE",{class:!0});var le=E(c);h=v(le,"OL",{class:!0});var se=E(h);for(let W=0;W<y.length;W+=1)y[W].l(se);se.forEach(p),le.forEach(p),u=T(f),R=v(f,"HR",{class:!0}),M=T(f),N=v(f,"FOOTER",{class:!0});var j=E(N);S=v(j,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(S)!=="svelte-aewzxh"&&(S.textContent=K),U=T(j),x=v(j,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(x)!=="svelte-1k3oqat"&&(x.textContent=Q),V=T(j),O=v(j,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),H(O)!=="svelte-1mfg19j"&&(O.textContent=X),j.forEach(p),$=T(f),f.forEach(p),this.h()},h(){k(t,"class","h3 underline underline-offset-2"),k(r,"class","opacity-50"),k(a,"class","card-header"),k(h,"class","list"),k(c,"class","p-4 h-40"),k(R,"class","opacity-50"),k(S,"type","button"),k(S,"class","btn w-1/2 mx-2 variant-filled hover:bg-error-500 hover:text-white"),k(x,"type","button"),k(x,"class","btn w-1/2 mx-2 variant-filled hover:bg-secondary-500 hover:text-white"),k(O,"type","button"),k(O,"class","btn w-1/2 mx-2 variant-filled hover:bg-primary-500 hover:text-white"),k(N,"class","card-footer p-4 flex justify-center"),k(e,"class","card card-hover overflow-hidden w-auto flex-grow")},m(g,f){A(g,e,f),n(e,a),n(a,t),n(t,i),n(a,s),n(a,r),n(r,b),n(e,m),n(e,c),n(c,h);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(h,null);n(e,u),n(e,R),n(e,M),n(e,N),n(N,S),n(N,U),n(N,x),n(N,V),n(N,O),n(e,$),z||(Y=[F(S,"click",de),F(x,"click",he),F(O,"click",fe)],z=!0)},p(g,f){o=g,f&1&&l!==(l=o[12].title+"")&&q(i,l),f&1&&d!==(d=ie(new Date(o[12].time_modified))+"")&&q(b,d),f&1&&(B=G(o[12].ingredients.slice(0,5)),y=ge(y,f,Z,1,o,B,P,h,ke,ne,null,re))},d(g){g&&p(e);for(let f=0;f<y.length;f+=1)y[f].d();z=!1,me(Y)}}}function xe(o){let e;function a(i,s){return i[1]?Te:we}let t=a(o),l=t(o);return{c(){l.c(),e=D()},l(i){l.l(i),e=D()},m(i,s){l.m(i,s),A(i,e,s)},p(i,[s]){t===(t=a(i))&&l?l.p(i,s):(l.d(1),l=t(i),l&&(l.c(),l.m(e.parentNode,e)))},i:J,o:J,d(i){i&&p(e),l.d(i)}}}function Oe(o,e,a){const t=Ee(),l=Re();let i,s=!0;async function r(){try{const R=await(await fetch("http://localhost:3000/api/recipes",{method:"GET",headers:{"Content-Type":"application/json"}})).json();a(0,i=R.map(Ce))}catch(u){console.log("===== ERROR LOADING RECIPES ====="),console.log(u)}}async function d(u){try{await fetch(`http://localhost:3000/api/delete/${u}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),a(0,i=i.filter(R=>R.rid!==u))}catch(R){console.log("===== ERROR DELETING RECIPE ====="),console.log(R)}}async function b(u){const R={type:"confirm",title:"Please Confirm",body:"Are you sure you wish to delete the recipe?",async response(M){M?(await d(u),l.trigger({message:"Recipe delete successfully!",background:"variant-filled-success"})):l.trigger({message:"Recipe did not delete",background:"variant-filled-error"})}};t.trigger(R)}function m(u){ae(`/recipes/${u}`)}function c(u){ae(`/recipes/${u}/update`)}return pe(async()=>{await r(),a(1,s=!1)}),[i,s,b,m,c,u=>{b(u.rid)},u=>{c(u.rid)},u=>{m(u.rid)}]}class He extends ye{constructor(e){super(),be(this,e,Oe,xe,ue,{})}}export{He as component};
